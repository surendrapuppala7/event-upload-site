<!DOCTYPE html>
<html lang="en" class="bg-slate-950 text-white">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Event Admin Login</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen">
  <div class="relative isolate overflow-hidden min-h-screen">
    <!-- Background -->
    <div class="absolute inset-0 -z-10 bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.25),_transparent_55%)]"></div>
    <div class="absolute inset-y-0 right-0 -z-10 w-1/2 bg-[radial-gradient(circle_at_bottom_right,_rgba(14,165,233,0.25),_transparent_55%)]"></div>

    <!-- Header -->
    <header class="max-w-6xl mx-auto px-6 py-6 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="text-2xl">üîê</span>
        <span class="text-lg font-semibold">Event Admin Portal</span>
      </div>
      <a href="index.html" class="text-sm text-slate-300 hover:text-white">
        Back to Home
      </a>
    </header>

    <!-- Main -->
    <main class="max-w-6xl mx-auto px-6 py-10">
      <div class="grid gap-10 lg:grid-cols-[1.1fr_0.9fr] items-start">

        <!-- Left: Context -->
        <section class="space-y-6">
          <p class="inline-flex items-center gap-2 rounded-full bg-white/10 px-4 py-2 text-xs text-slate-200">
            Secure admin authentication
          </p>

          <h1 class="text-4xl font-semibold leading-tight">
            Sign in securely to manage your event.
          </h1>

          <p class="text-slate-300">
            Event administrators authenticate using Google.
            No passwords are stored or handled by this platform.
          </p>

          <div class="grid gap-4 sm:grid-cols-2">
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <p class="text-sm font-semibold">Google-verified identity</p>
              <p class="text-sm text-slate-300 mt-2">
                Authentication handled entirely by Google OAuth.
              </p>
            </div>
            <div class="rounded-2xl border border-white/10 bg-white/5 p-4">
              <p class="text-sm font-semibold">Event-scoped access</p>
              <p class="text-sm text-slate-300 mt-2">
                Access is limited to events you‚Äôre authorized for.
              </p>
            </div>
          </div>
        </section>

        <!-- Right: Login Card -->
        <section class="bg-white text-slate-900 rounded-3xl shadow-2xl p-8">
          <h2 class="text-2xl font-semibold">Admin sign in</h2>
          <p class="mt-2 text-sm text-slate-500">
            Enter your Event ID, then continue with Google.
          </p>

          <div class="mt-6 space-y-5">
            <div>
              <label for="eventId" class="text-sm font-semibold text-slate-700">
                Event ID
              </label>
              <input
                id="eventId"
                required
                placeholder="e.g. EVT-AB1234"
                class="w-full mt-2 rounded-xl border border-slate-200 px-4 py-3
                       text-slate-900 shadow-sm focus:border-indigo-500
                       focus:outline-none focus:ring-2 focus:ring-indigo-200" />
            </div>

            <button
              id="googleLoginBtn"
              class="w-full flex items-center justify-center gap-3
                     rounded-xl border border-slate-300 bg-white py-3
                     font-semibold shadow hover:bg-slate-50 transition">
              <svg width="18" height="18" viewBox="0 0 48 48" aria-hidden="true">
                <path fill="#EA4335" d="M24 9.5c3.54 0 6.01 1.54 7.39 2.82l5.46-5.46C33.47 3.54 29.13 1.5 24 1.5 14.78 1.5 6.87 6.98 3.14 14.9l6.64 5.16C11.4 13.02 17.22 9.5 24 9.5z"/>
                <path fill="#4285F4" d="M46.1 24.5c0-1.56-.14-3.06-.4-4.5H24v9.02h12.44c-.54 2.9-2.16 5.36-4.6 7.02l7.05 5.48C43.27 37.38 46.1 31.5 46.1 24.5z"/>
                <path fill="#FBBC05" d="M9.78 28.06a14.7 14.7 0 0 1 0-8.12l-6.64-5.16A23.92 23.92 0 0 0 1.5 24c0 3.86.92 7.5 2.64 10.78l6.64-5.16z"/>
                <path fill="#34A853" d="M24 46.5c6.13 0 11.28-2.03 15.04-5.52l-7.05-5.48c-1.96 1.32-4.48 2.1-7.99 2.1-6.78 0-12.6-3.52-14.22-8.56l-6.64 5.16C6.87 41.02 14.78 46.5 24 46.5z"/>
              </svg>
              Continue with Google
            </button>

            <p id="status"
               class="text-center text-sm font-medium text-rose-600"
               aria-live="polite"></p>
          </div>
        </section>
      </div>
    </main>
  </div>

<script>
const params = new URLSearchParams(location.search);
const eventIdParam = params.get("eventId");

if (eventIdParam) {
  const input = document.getElementById("eventId");
  input.value = eventIdParam;
  input.readOnly = true;
}

document.getElementById("googleLoginBtn").addEventListener("click", () => {
  const eventId = document.getElementById("eventId").value.trim();
  const status = document.getElementById("status");
  const btn = document.getElementById("googleLoginBtn");

  if (!eventId) {
    status.textContent = "Event ID is required.";
    return;
  }

  btn.disabled = true;
  btn.classList.add("opacity-60", "cursor-not-allowed");

  const API_BASE = "https://event-upload-api.surendra-david-puppala.workers.dev";

  // Correct OAuth start endpoint
  window.location.href =
    `${API_BASE}/oauth/start?eventId=` + encodeURIComponent(eventId);
});
</script>

</body>
</html>
